<div class="profile-section">
	<div class="profile-left">
		<!-- insert as soon as image support in events backend -->
		<div class="profile-image">
			<img ng-show="!event.head_image.url" ng-src="{{ baseUrl }}frontend/media/Dino.png" />
			<img ng-show="event.head_image.url" ng-src="{{ event.head_image.url }}" />
		</div>

		<div class="m-b-10" ng-show="event.application_status == 'open'">
			<a ui-sref="app.events.apply({ id: event.id })" class="btn btn-warning btn-block btn-sm">Apply</a>
		</div>

		<!-- TODO check if user is organizer, otherwise don't show -->
		<div class="profile-highlight">
			<h4>Admin Panel</h4>
			<div class="m-b-5" ng-if="permissions.edit">
				<a ui-sref="app.eventadmin.edit({ id: event.id })" >Edit event</a>
			</div>
			<div class="m-b-5" ng-if="permissions.view_applications">
				<a ui-sref="app.eventadmin.approve_participants({ id: event.id })">View applications</a>
			</div>
			<div class="m-b-5">
				<a ui-sref="app.events.organizers({ id: event.id })">See organizers</a>
			</div>
			<div class="m-b-5">
				<a ui-sref="app.events.participants({ id: event.id })" >See participants</a>
			</div>
		</div>

	</div>

	<div class="profile-right">
		<div class="profile-info">
			<div class="table-responsive">
				<table class="table table-profile">
					<thead>
						<tr><th></th><th><h4>{{ event.name }}
							<small>
								<span ng-repeat="local in event.organizing_locals">
									<span ng-show="!$last">, </span>
									{{ local.name }}
								</span>
							</small>
						</h4></th></tr>
					</thead>
					<tbody>

						<tr>
							<td class="field">Starts</td>
							<td>{{ event.starts|date:'MMM d, yyyy HH:mm' }}</td>
						</tr>
						<tr>
							<td class="field">Ends</td>
							<td>{{ event.ends|date:'MMM d, yyyy HH:mm' }}</td>
						</tr>

						<tr class="divider"><td colspan="2"></td></tr>
						<tr>
							<td class="field">Description</td>
							<td><p style="white-space: pre-wrap;" ng-bind="event.description"></p></td>
						</tr>
						
						<tr>
							<td class="field">Fee</td>
							<td ng-show="event.fee">{{ event.fee|number:2 }} €</td>
							<td ng-show="!event.fee">Free as your spirit</td>
						</tr>
						
						<tr>
							<td class="field">Type</td>
							<td ng-switch="event.type">
								<span ng-switch-when="su">Summer University</span>
								<span ng-switch-when="statutory">Statutory Event</span>
								<span ng-switch-when="non-statutory">Non-Statutory Event</span>
								<span ng-switch-when="local">Local Event</span>
							</td>
						</tr>
						<tr>
							<td class="field">Status</td>
							<td>{{ event.status }}</td>
						</tr>

						<!--<tr class="divider"><td colspan="2"></td></tr>-->

						<tr>
							<td class="field">Participants</td>
							<td ng-show="event.max_participants">Up to {{ event.max_participants }}</td>
							<td ng-show="!event.max_participants">No limit</td>
						</tr>
						<tr>
							<td class="field">Application Deadline</td>
							<td>{{ event.application_deadline | date:'MMM d, yyyy HH:mm' }}</td>
						</tr>
						<tr>
							<td class="field">Application status</td>
							<td>{{ event.application_status }}</td>
						</tr>
						<tr ng-show="event.application_status == 'open'">
							<td class="field"></td>
							<td><a ui-sref="app.events.apply({ id: event.id })" class="btn btn-warning">Apply until {{ event.application_deadline | date:'MMM d' }}</a></td>
						</tr>


					</tbody>
				</table>
			</div>
		</div>
	</div>

</div>

<!-- old version
<br /><br /><br />
<a href="/#/">Back to listing</a>

<ul>
	<li>Title: <a href="{{ hashify(event.url) }}">{{ event.name }}</a></li>
	<li>Description: {{ event.description }}</li>
	<li>Starts: {{ event.starts }}</li>
	<li>Ends: {{ event.ends }}</li>
	<li>Organizing locals: 
		<ul>
			<li ng-repeat="local in event.organizing_locals">{{ local.foreign_id }}</li>
		</ul>
	</li>
	<li>Type: {{ event.type }}</li>
	<li>Status: {{ event.status }}</li>
	<li>Maximum # Partícipants: {{ event.max_participants }}</li>
	<li>Type: {{ event.type }}</li>
	<li>Application Deadline: {{ event.application_deadline }}</li>
	<li>Application Status: {{ event.application_status }}</li>
	<li>Application Fields:
		<ul>
			<li ng-repeat="app_field in event.application_fields">{{ app_field.name }}</li>
		</ul>
	</li>
	<li>Organizers:
		<ul>
			<li ng-repeat="organizer in event.organizers">{{ organizer.foreign_id }} - {{ organizer.role }}</li>
		</ul>
	</li>
	<li>Applications:
		<ul>
			<li ng-repeat="applicant in event.applications">{{ applicant.foreign_id }} ({{ applicant.application_status }})
		</ul>
	</li>
	<li><a href="{{ hashify('/edit/' + event._id) }}">edit</a></li>
</ul>

-->